// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package storage

import (
	"context"
	"reflect"

	"errors"
	"github.com/muhlba91/pulumi-proxmoxve/sdk/v7/go/proxmoxve/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages a Proxmox Backup Server (PBS) storage in Proxmox VE.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/muhlba91/pulumi-proxmoxve/sdk/v7/go/proxmoxve/storage"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := storage.NewPBS(ctx, "example", &storage.PBSArgs{
//				PbsId: pulumi.String("example-pbs"),
//				Nodes: pulumi.StringArray{
//					pulumi.String("pve"),
//				},
//				Server:      pulumi.String("pbs.example.local"),
//				Datastore:   pulumi.String("backup"),
//				Username:    pulumi.String("pbs-user"),
//				Password:    pulumi.String("pbs-password"),
//				Fingerprint: pulumi.String("AA:BB:CC:DD:EE:FF"),
//				Contents: pulumi.StringArray{
//					pulumi.String("backup"),
//				},
//				GenerateEncryptionKey: pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type PBS struct {
	pulumi.CustomResourceState

	// Configure backup retention settings for the storage type.
	Backups PBSBackupsPtrOutput `pulumi:"backups"`
	// The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
	Contents pulumi.StringArrayOutput `pulumi:"contents"`
	// The name of the datastore on the Proxmox Backup Server.
	Datastore pulumi.StringOutput `pulumi:"datastore"`
	// Whether the storage is disabled.
	Disable pulumi.BoolOutput `pulumi:"disable"`
	// An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generateEncryptionKey`.
	EncryptionKey pulumi.StringPtrOutput `pulumi:"encryptionKey"`
	// The SHA256 fingerprint of the encryption key currently in use.
	EncryptionKeyFingerprint pulumi.StringOutput `pulumi:"encryptionKeyFingerprint"`
	// The SHA256 fingerprint of the Proxmox Backup Server's certificate.
	Fingerprint pulumi.StringPtrOutput `pulumi:"fingerprint"`
	// If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generatedEncryptionKey` attribute. Conflicts with `encryptionKey`.
	GenerateEncryptionKey pulumi.BoolPtrOutput `pulumi:"generateEncryptionKey"`
	// The encryption key returned by Proxmox when `generateEncryptionKey` is true.
	GeneratedEncryptionKey pulumi.StringOutput `pulumi:"generatedEncryptionKey"`
	// The namespace to use on the Proxmox Backup Server.
	Namespace pulumi.StringPtrOutput `pulumi:"namespace"`
	// A list of nodes where this storage is available.
	Nodes pulumi.StringArrayOutput `pulumi:"nodes"`
	// The password for authenticating with the Proxmox Backup Server.
	Password pulumi.StringOutput `pulumi:"password"`
	// The unique identifier of the storage.
	PbsId pulumi.StringOutput `pulumi:"pbsId"`
	// The IP address or DNS name of the Proxmox Backup Server.
	Server pulumi.StringOutput `pulumi:"server"`
	// Whether the storage is shared across all nodes.
	Shared pulumi.BoolOutput `pulumi:"shared"`
	// The username for authenticating with the Proxmox Backup Server.
	Username pulumi.StringOutput `pulumi:"username"`
}

// NewPBS registers a new resource with the given unique name, arguments, and options.
func NewPBS(ctx *pulumi.Context,
	name string, args *PBSArgs, opts ...pulumi.ResourceOption) (*PBS, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Datastore == nil {
		return nil, errors.New("invalid value for required argument 'Datastore'")
	}
	if args.Password == nil {
		return nil, errors.New("invalid value for required argument 'Password'")
	}
	if args.PbsId == nil {
		return nil, errors.New("invalid value for required argument 'PbsId'")
	}
	if args.Server == nil {
		return nil, errors.New("invalid value for required argument 'Server'")
	}
	if args.Username == nil {
		return nil, errors.New("invalid value for required argument 'Username'")
	}
	if args.EncryptionKey != nil {
		args.EncryptionKey = pulumi.ToSecret(args.EncryptionKey).(pulumi.StringPtrInput)
	}
	if args.Password != nil {
		args.Password = pulumi.ToSecret(args.Password).(pulumi.StringInput)
	}
	secrets := pulumi.AdditionalSecretOutputs([]string{
		"encryptionKey",
		"generatedEncryptionKey",
		"password",
	})
	opts = append(opts, secrets)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource PBS
	err := ctx.RegisterResource("proxmoxve:Storage/pBS:PBS", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetPBS gets an existing PBS resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetPBS(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *PBSState, opts ...pulumi.ResourceOption) (*PBS, error) {
	var resource PBS
	err := ctx.ReadResource("proxmoxve:Storage/pBS:PBS", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering PBS resources.
type pbsState struct {
	// Configure backup retention settings for the storage type.
	Backups *PBSBackups `pulumi:"backups"`
	// The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
	Contents []string `pulumi:"contents"`
	// The name of the datastore on the Proxmox Backup Server.
	Datastore *string `pulumi:"datastore"`
	// Whether the storage is disabled.
	Disable *bool `pulumi:"disable"`
	// An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generateEncryptionKey`.
	EncryptionKey *string `pulumi:"encryptionKey"`
	// The SHA256 fingerprint of the encryption key currently in use.
	EncryptionKeyFingerprint *string `pulumi:"encryptionKeyFingerprint"`
	// The SHA256 fingerprint of the Proxmox Backup Server's certificate.
	Fingerprint *string `pulumi:"fingerprint"`
	// If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generatedEncryptionKey` attribute. Conflicts with `encryptionKey`.
	GenerateEncryptionKey *bool `pulumi:"generateEncryptionKey"`
	// The encryption key returned by Proxmox when `generateEncryptionKey` is true.
	GeneratedEncryptionKey *string `pulumi:"generatedEncryptionKey"`
	// The namespace to use on the Proxmox Backup Server.
	Namespace *string `pulumi:"namespace"`
	// A list of nodes where this storage is available.
	Nodes []string `pulumi:"nodes"`
	// The password for authenticating with the Proxmox Backup Server.
	Password *string `pulumi:"password"`
	// The unique identifier of the storage.
	PbsId *string `pulumi:"pbsId"`
	// The IP address or DNS name of the Proxmox Backup Server.
	Server *string `pulumi:"server"`
	// Whether the storage is shared across all nodes.
	Shared *bool `pulumi:"shared"`
	// The username for authenticating with the Proxmox Backup Server.
	Username *string `pulumi:"username"`
}

type PBSState struct {
	// Configure backup retention settings for the storage type.
	Backups PBSBackupsPtrInput
	// The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
	Contents pulumi.StringArrayInput
	// The name of the datastore on the Proxmox Backup Server.
	Datastore pulumi.StringPtrInput
	// Whether the storage is disabled.
	Disable pulumi.BoolPtrInput
	// An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generateEncryptionKey`.
	EncryptionKey pulumi.StringPtrInput
	// The SHA256 fingerprint of the encryption key currently in use.
	EncryptionKeyFingerprint pulumi.StringPtrInput
	// The SHA256 fingerprint of the Proxmox Backup Server's certificate.
	Fingerprint pulumi.StringPtrInput
	// If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generatedEncryptionKey` attribute. Conflicts with `encryptionKey`.
	GenerateEncryptionKey pulumi.BoolPtrInput
	// The encryption key returned by Proxmox when `generateEncryptionKey` is true.
	GeneratedEncryptionKey pulumi.StringPtrInput
	// The namespace to use on the Proxmox Backup Server.
	Namespace pulumi.StringPtrInput
	// A list of nodes where this storage is available.
	Nodes pulumi.StringArrayInput
	// The password for authenticating with the Proxmox Backup Server.
	Password pulumi.StringPtrInput
	// The unique identifier of the storage.
	PbsId pulumi.StringPtrInput
	// The IP address or DNS name of the Proxmox Backup Server.
	Server pulumi.StringPtrInput
	// Whether the storage is shared across all nodes.
	Shared pulumi.BoolPtrInput
	// The username for authenticating with the Proxmox Backup Server.
	Username pulumi.StringPtrInput
}

func (PBSState) ElementType() reflect.Type {
	return reflect.TypeOf((*pbsState)(nil)).Elem()
}

type pbsArgs struct {
	// Configure backup retention settings for the storage type.
	Backups *PBSBackups `pulumi:"backups"`
	// The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
	Contents []string `pulumi:"contents"`
	// The name of the datastore on the Proxmox Backup Server.
	Datastore string `pulumi:"datastore"`
	// Whether the storage is disabled.
	Disable *bool `pulumi:"disable"`
	// An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generateEncryptionKey`.
	EncryptionKey *string `pulumi:"encryptionKey"`
	// The SHA256 fingerprint of the Proxmox Backup Server's certificate.
	Fingerprint *string `pulumi:"fingerprint"`
	// If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generatedEncryptionKey` attribute. Conflicts with `encryptionKey`.
	GenerateEncryptionKey *bool `pulumi:"generateEncryptionKey"`
	// The namespace to use on the Proxmox Backup Server.
	Namespace *string `pulumi:"namespace"`
	// A list of nodes where this storage is available.
	Nodes []string `pulumi:"nodes"`
	// The password for authenticating with the Proxmox Backup Server.
	Password string `pulumi:"password"`
	// The unique identifier of the storage.
	PbsId string `pulumi:"pbsId"`
	// The IP address or DNS name of the Proxmox Backup Server.
	Server string `pulumi:"server"`
	// The username for authenticating with the Proxmox Backup Server.
	Username string `pulumi:"username"`
}

// The set of arguments for constructing a PBS resource.
type PBSArgs struct {
	// Configure backup retention settings for the storage type.
	Backups PBSBackupsPtrInput
	// The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
	Contents pulumi.StringArrayInput
	// The name of the datastore on the Proxmox Backup Server.
	Datastore pulumi.StringInput
	// Whether the storage is disabled.
	Disable pulumi.BoolPtrInput
	// An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generateEncryptionKey`.
	EncryptionKey pulumi.StringPtrInput
	// The SHA256 fingerprint of the Proxmox Backup Server's certificate.
	Fingerprint pulumi.StringPtrInput
	// If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generatedEncryptionKey` attribute. Conflicts with `encryptionKey`.
	GenerateEncryptionKey pulumi.BoolPtrInput
	// The namespace to use on the Proxmox Backup Server.
	Namespace pulumi.StringPtrInput
	// A list of nodes where this storage is available.
	Nodes pulumi.StringArrayInput
	// The password for authenticating with the Proxmox Backup Server.
	Password pulumi.StringInput
	// The unique identifier of the storage.
	PbsId pulumi.StringInput
	// The IP address or DNS name of the Proxmox Backup Server.
	Server pulumi.StringInput
	// The username for authenticating with the Proxmox Backup Server.
	Username pulumi.StringInput
}

func (PBSArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*pbsArgs)(nil)).Elem()
}

type PBSInput interface {
	pulumi.Input

	ToPBSOutput() PBSOutput
	ToPBSOutputWithContext(ctx context.Context) PBSOutput
}

func (*PBS) ElementType() reflect.Type {
	return reflect.TypeOf((**PBS)(nil)).Elem()
}

func (i *PBS) ToPBSOutput() PBSOutput {
	return i.ToPBSOutputWithContext(context.Background())
}

func (i *PBS) ToPBSOutputWithContext(ctx context.Context) PBSOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PBSOutput)
}

// PBSArrayInput is an input type that accepts PBSArray and PBSArrayOutput values.
// You can construct a concrete instance of `PBSArrayInput` via:
//
//	PBSArray{ PBSArgs{...} }
type PBSArrayInput interface {
	pulumi.Input

	ToPBSArrayOutput() PBSArrayOutput
	ToPBSArrayOutputWithContext(context.Context) PBSArrayOutput
}

type PBSArray []PBSInput

func (PBSArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PBS)(nil)).Elem()
}

func (i PBSArray) ToPBSArrayOutput() PBSArrayOutput {
	return i.ToPBSArrayOutputWithContext(context.Background())
}

func (i PBSArray) ToPBSArrayOutputWithContext(ctx context.Context) PBSArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PBSArrayOutput)
}

// PBSMapInput is an input type that accepts PBSMap and PBSMapOutput values.
// You can construct a concrete instance of `PBSMapInput` via:
//
//	PBSMap{ "key": PBSArgs{...} }
type PBSMapInput interface {
	pulumi.Input

	ToPBSMapOutput() PBSMapOutput
	ToPBSMapOutputWithContext(context.Context) PBSMapOutput
}

type PBSMap map[string]PBSInput

func (PBSMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PBS)(nil)).Elem()
}

func (i PBSMap) ToPBSMapOutput() PBSMapOutput {
	return i.ToPBSMapOutputWithContext(context.Background())
}

func (i PBSMap) ToPBSMapOutputWithContext(ctx context.Context) PBSMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PBSMapOutput)
}

type PBSOutput struct{ *pulumi.OutputState }

func (PBSOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**PBS)(nil)).Elem()
}

func (o PBSOutput) ToPBSOutput() PBSOutput {
	return o
}

func (o PBSOutput) ToPBSOutputWithContext(ctx context.Context) PBSOutput {
	return o
}

// Configure backup retention settings for the storage type.
func (o PBSOutput) Backups() PBSBackupsPtrOutput {
	return o.ApplyT(func(v *PBS) PBSBackupsPtrOutput { return v.Backups }).(PBSBackupsPtrOutput)
}

// The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
func (o PBSOutput) Contents() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringArrayOutput { return v.Contents }).(pulumi.StringArrayOutput)
}

// The name of the datastore on the Proxmox Backup Server.
func (o PBSOutput) Datastore() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.Datastore }).(pulumi.StringOutput)
}

// Whether the storage is disabled.
func (o PBSOutput) Disable() pulumi.BoolOutput {
	return o.ApplyT(func(v *PBS) pulumi.BoolOutput { return v.Disable }).(pulumi.BoolOutput)
}

// An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generateEncryptionKey`.
func (o PBSOutput) EncryptionKey() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringPtrOutput { return v.EncryptionKey }).(pulumi.StringPtrOutput)
}

// The SHA256 fingerprint of the encryption key currently in use.
func (o PBSOutput) EncryptionKeyFingerprint() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.EncryptionKeyFingerprint }).(pulumi.StringOutput)
}

// The SHA256 fingerprint of the Proxmox Backup Server's certificate.
func (o PBSOutput) Fingerprint() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringPtrOutput { return v.Fingerprint }).(pulumi.StringPtrOutput)
}

// If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generatedEncryptionKey` attribute. Conflicts with `encryptionKey`.
func (o PBSOutput) GenerateEncryptionKey() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *PBS) pulumi.BoolPtrOutput { return v.GenerateEncryptionKey }).(pulumi.BoolPtrOutput)
}

// The encryption key returned by Proxmox when `generateEncryptionKey` is true.
func (o PBSOutput) GeneratedEncryptionKey() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.GeneratedEncryptionKey }).(pulumi.StringOutput)
}

// The namespace to use on the Proxmox Backup Server.
func (o PBSOutput) Namespace() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringPtrOutput { return v.Namespace }).(pulumi.StringPtrOutput)
}

// A list of nodes where this storage is available.
func (o PBSOutput) Nodes() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringArrayOutput { return v.Nodes }).(pulumi.StringArrayOutput)
}

// The password for authenticating with the Proxmox Backup Server.
func (o PBSOutput) Password() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.Password }).(pulumi.StringOutput)
}

// The unique identifier of the storage.
func (o PBSOutput) PbsId() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.PbsId }).(pulumi.StringOutput)
}

// The IP address or DNS name of the Proxmox Backup Server.
func (o PBSOutput) Server() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.Server }).(pulumi.StringOutput)
}

// Whether the storage is shared across all nodes.
func (o PBSOutput) Shared() pulumi.BoolOutput {
	return o.ApplyT(func(v *PBS) pulumi.BoolOutput { return v.Shared }).(pulumi.BoolOutput)
}

// The username for authenticating with the Proxmox Backup Server.
func (o PBSOutput) Username() pulumi.StringOutput {
	return o.ApplyT(func(v *PBS) pulumi.StringOutput { return v.Username }).(pulumi.StringOutput)
}

type PBSArrayOutput struct{ *pulumi.OutputState }

func (PBSArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PBS)(nil)).Elem()
}

func (o PBSArrayOutput) ToPBSArrayOutput() PBSArrayOutput {
	return o
}

func (o PBSArrayOutput) ToPBSArrayOutputWithContext(ctx context.Context) PBSArrayOutput {
	return o
}

func (o PBSArrayOutput) Index(i pulumi.IntInput) PBSOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *PBS {
		return vs[0].([]*PBS)[vs[1].(int)]
	}).(PBSOutput)
}

type PBSMapOutput struct{ *pulumi.OutputState }

func (PBSMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PBS)(nil)).Elem()
}

func (o PBSMapOutput) ToPBSMapOutput() PBSMapOutput {
	return o
}

func (o PBSMapOutput) ToPBSMapOutputWithContext(ctx context.Context) PBSMapOutput {
	return o
}

func (o PBSMapOutput) MapIndex(k pulumi.StringInput) PBSOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *PBS {
		return vs[0].(map[string]*PBS)[vs[1].(string)]
	}).(PBSOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*PBSInput)(nil)).Elem(), &PBS{})
	pulumi.RegisterInputType(reflect.TypeOf((*PBSArrayInput)(nil)).Elem(), PBSArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*PBSMapInput)(nil)).Elem(), PBSMap{})
	pulumi.RegisterOutputType(PBSOutput{})
	pulumi.RegisterOutputType(PBSArrayOutput{})
	pulumi.RegisterOutputType(PBSMapOutput{})
}
